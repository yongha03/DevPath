server:
  # 서버 포트 (기본 8082, SERVER_PORT로 덮어씀) test중
  port: ${SERVER_PORT:8082}
  # 프록시 헤더 사용
  forward-headers-strategy: framework

spring:
  application:
    name: devpath

  security:
    oauth2:
      client:
        registration:
          github:
            # GitHub OAuth 키
            client-id: ${GITHUB_CLIENT_ID}
            client-secret: ${GITHUB_CLIENT_SECRET}
            scope:
              - read:user
              - user:email
          google:
            # Google OAuth 키
            client-id: ${GOOGLE_CLIENT_ID}
            client-secret: ${GOOGLE_CLIENT_SECRET}
            scope:
              - openid
              - email
              - profile

  config:
    # .env 로드
    import: optional:file:.env[.properties]

  datasource:
    # Postgres 연결
    driver-class-name: org.postgresql.Driver
    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:devpath_db}
    username: ${DB_USER}
    password: ${DB_PASSWORD}

  sql:
    init:
      # 시작 시 SQL 실행
      mode: always

  jpa:
    hibernate:
      # 엔티티 기준 스키마 반영
      ddl-auto: update
    show-sql: true
    defer-datasource-initialization: true
    properties:
      hibernate:
        format_sql: true
        default_batch_fetch_size: 1000

  data:
    redis:
      # Redis 연결
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD}

logging:
  level:
    org.hibernate.SQL: debug

app:
  oauth2:
    # 로그인 후 리다이렉트 URL
    redirect-url: ${DEVPATH_OAUTH2_REDIRECT_URL:${OAUTH2_REDIRECT_URL:http://localhost:3000/oauth2/redirect}}
    # OAuth2 허용 Origin
    allowed-origins: ${DEVPATH_OAUTH2_ALLOWED_ORIGINS:${OAUTH2_ALLOWED_ORIGINS:http://localhost:3000}}
  security:
    # HTTPS 강제 여부
    require-https: ${DEVPATH_REQUIRE_HTTPS:${REQUIRE_HTTPS:false}}
  cors:
    # CORS 허용 Origin
    allowed-origins: ${DEVPATH_CORS_ALLOWED_ORIGINS:${CORS_ALLOWED_ORIGINS:http://localhost:3000}}

jwt:
  # Base64 HMAC 키
  secret: c3ByaW5nLWJvb3QtZGV2cGF0aC1zZWNyZXQta2V5LXRlc3QtZ2VuZXJhdGUtMjAyNjAyMjQ=
  access-token-expiration: 3600000 # 3600000ms = 1시간
  refresh-token-expiration: 1209600000 # 1209600000ms = 14일
